$("#for_ajax").html("<%= escape_javascript(render(:file => "jobs/index")) %>");
$('.for_autocomplete_listing').show();



var batin = $("input:submit");
batin.button();

batin.on ('click',  function() {
    batin.attr("disabled", true);
});

$(".stripeMe tr:even").addClass("alt");


window.scrollTo(0, 0);


var locale = $("div.set_locale").text();

    $(".td_for_tooltip").tooltip({
    bodyHandler: function(){

        var url = $(this).children().val();

        var tip;

        if (locale == "tr"){
            tip = $("<span/>").html("yüklüyor...");
        }

        if (locale == "en"){
            tip = $("<span/>").html("loading...");
        }


        $.ajax({

            url: url,
            success: function(html){
             tip = tip.html(html);  //.replace(/(\r\n|\n|\r)/gm,"");

        }});

        return tip;
    },
    showURL: false,
    track: true,
    delay: 0,
    extraClass:"show_ajax matwork"     // right is a css class
});

    $(".for_autocomplete_listing a").click( function() {
        window.scrollTo(0, 0);
        var str = {};
        str = getUrlParams(this.href);
        var i = $('#select_box').children(":selected").attr("value");
        if(i>0) {
           $('#remove_category_anchor a').hide();
           $.ajax({
            url:'/ajaxing/?category_id=' + i + '&' + str,
            beforeSend:function(){
                $('.for_spinner').show();
            },
            complete: function(){

                  $('.for_spinner').hide();

            }});
            return false;
        }

/*        $.ajaxSetuup ve $.ajax kullanip $.getScript("jobs/search/?" + str); kullanarak
        yukardaki $("body").live... kullanildiginda ilk page load ettiginde page 2 ye tikladiginda
        spinner gif yuklemiyor.*/
        $.ajax({
            url:"jobs/search/?" + str,
            beforeSend:function(){
                $('.for_spinner').show();
            },
            complete: function(){

                  $('.for_spinner').hide();
          }});
        return false;
    });

    function getUrlParams(href) {
        var params = (href.split('?')[1] || '');
        return params;
    }


    $(".search_by_category_submit").click(function(e){
        e.preventDefault();
        var i = $('#select_box').children(":selected").attr("value");
        var u;
        if (i==0)
           u = '/ajaxing/?category_id=' + 0;
        if (i>0)
           u = '/ajaxing/?category_id=' + i;

            $.ajax
            ({
                url:u,
                beforeSend:function()
                {
                    $('.for_spinner').show();
                },

                complete: function()
                {
                  $('.for_spinner').hide();
                }
            });
    });


$("#search_form_submit").click(function(e){

        e.preventDefault();

        var u = $("#search_form").serialize();

            $.ajax
            ({
                url:'/jobs//search?' + u,
                beforeSend:function()
                {
                    $('.for_spinner').show();
                },

                complete: function()
                {
                  $('.for_spinner').hide();
                }
            });
    });